<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜“å…¼èŒ - æˆ‘çš„ç®€å†</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* ç®€å†é¡µé¢ä¸“å±æ ·å¼è¡¥å…… */
        .resume-preview {
            line-height: 1.8;
        }
        .resume-section {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .resume-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .resume-section h4 {
            font-size: 16px;
            margin-bottom: 10px;
            color: #667eea;
        }
        .resume-form-item {
            margin-bottom: 15px;
        }
        .form-tip {
            font-size: 12px;
            color: #999;
            margin-top: 5px;
        }
        .resume-type-select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }
        .resume-type-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .skill-tag {
            display: inline-block;
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        /* åˆ é™¤æŒ‰é’®æ ·å¼ */
        .delete-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        .delete-btn:hover {
            background: #d32f2f;
        }
        .delete-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        /* ç©ºåˆ—è¡¨æ ·å¼ */
        .empty-resume {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }
        .empty-resume .empty-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="personal.html" class="logo">
                <h1>æ˜“å…¼èŒ</h1>
            </a>
            <div class="user-info">
                <div class="avatar">
                    <img src="https://picsum.photos/200/200?random=1" alt="ç”¨æˆ·å¤´åƒ" onerror="this.src='https://via.placeholder.com/40/667eea/ffffff?text=å¼ '">
                </div>
                <span class="username">å¼ ä¸‰</span>
                <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
            </div>
        </div>
    </nav>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-container">
        <!-- ä¾§è¾¹æ  -->
        <aside class="sidebar">
            <div class="profile-card">
                <div class="profile-avatar">
                    <img src="https://picsum.photos/200/200?random=1" alt="ä¸ªäººå¤´åƒ" onerror="this.src='https://via.placeholder.com/100/667eea/ffffff?text=å¼ '">
                </div>
                <h3 class="profile-name">å¼ ä¸‰</h3>
                <p class="profile-role">å…¼èŒæ±‚èŒè€…</p>
                <div class="credit-score">ä¿¡ç”¨åˆ†ï¼š85ï¼ˆä¼˜ç§€ï¼‰</div>
                <button class="edit-profile-btn" onclick="window.location.href='personal.html'">ç¼–è¾‘èµ„æ–™</button>
            </div>

            <ul class="sidebar-nav">
                <li class="nav-item">
                    <a href="personal.html" class="nav-link" data-module="profile">
                        <span class="nav-icon">ğŸ‘¤</span>
                        <span>ä¸ªäººä¿¡æ¯</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="resume.html" class="nav-link active" data-module="resume">
                        <span class="nav-icon">ğŸ“</span>
                        <span>æˆ‘çš„ç®€å†</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="apply.html" class="nav-link" data-module="apply">
                        <span class="nav-icon">ğŸ“¬</span>
                        <span>æŠ•é€’è®°å½•</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="message.html" class="nav-link" data-module="message">
                        <span class="nav-icon">ğŸ’¬</span>
                        <span>æ¶ˆæ¯ä¸­å¿ƒ</span>
                        <span class="badge">2</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="collect.html" class="nav-link" data-module="collect">
                        <span class="nav-icon">â­</span>
                        <span>æˆ‘çš„æ”¶è—</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="setting.html" class="nav-link" data-module="setting">
                        <span class="nav-icon">âš™ï¸</span>
                        <span>è´¦æˆ·è®¾ç½®</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="help.html" class="nav-link" data-module="help">
                        <span class="nav-icon">â“</span>
                        <span>å¸®åŠ©ä¸­å¿ƒ</span>
                    </a>
                </li>
            </ul>
        </aside>

        <!-- å³ä¾§å†…å®¹åŒº -->
        <div class="content-wrapper">
            <div class="content-panel">
                <h3 class="panel-title">æˆ‘çš„ç®€å†</h3>
                <!-- ç®€å†åˆ—è¡¨å®¹å™¨ -->
                <div id="resumeContainer">
                    <div class="resume-list" id="resumeList">
                        <!-- ç®€å†é¡¹åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <!-- ç©ºåˆ—è¡¨æç¤º -->
                    <div class="empty-resume" id="emptyResumeTip" style="display: none;">
                        <div class="empty-icon">ğŸ“</div>
                        <div class="empty-text">æš‚æ— ç®€å†ï¼Œè¯·åˆ›å»ºä½ çš„ç¬¬ä¸€ä»½ç®€å†</div>
                        <button class="add-resume-btn" onclick="openAddResumeModal()" style="margin-top: 20px;">+ æ·»åŠ æ–°ç®€å†</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ç®€å†é¢„è§ˆå¼¹çª— -->
    <div class="modal-mask" id="previewModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title" id="previewTitle">ç®€å†é¢„è§ˆ</h2>
                <button class="modal-close" onclick="closeModal('previewModal')">Ã—</button>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- é¢„è§ˆå†…å®¹åŠ¨æ€ç”Ÿæˆ -->
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-primary" onclick="closeModal('previewModal')">å…³é—­é¢„è§ˆ</button>
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘ç®€å†å¼¹çª— -->
    <div class="modal-mask" id="editModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title" id="editTitle">ç¼–è¾‘ç®€å†</h2>
                <button class="modal-close" onclick="closeModal('editModal')">Ã—</button>
            </div>
            <div class="modal-body">
                <form id="editResumeForm">
                    <input type="hidden" id="editResumeId">
                    <div class="resume-form-item">
                        <label class="form-label">ç®€å†åç§°</label>
                        <input type="text" class="form-input" id="editResumeName" placeholder="è¯·è¾“å…¥ç®€å†åç§°ï¼ˆå¦‚ï¼šé€šç”¨ç®€å†ã€å®¶æ•™ç®€å†ï¼‰">
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">ç®€å†ç±»å‹</label>
                        <select class="resume-type-select" id="editResumeType">
                            <option value="é€šç”¨ç®€å†">é€šç”¨ç®€å†</option>
                            <option value="å®¶æ•™ä¸“é¡¹ç®€å†">å®¶æ•™ä¸“é¡¹ç®€å†</option>
                            <option value="ç¼–ç¨‹ä¸“é¡¹ç®€å†">ç¼–ç¨‹ä¸“é¡¹ç®€å†</option>
                            <option value="å‰ªè¾‘ä¸“é¡¹ç®€å†">å‰ªè¾‘ä¸“é¡¹ç®€å†</option>
                            <option value="å…¶ä»–ä¸“é¡¹ç®€å†">å…¶ä»–ä¸“é¡¹ç®€å†</option>
                        </select>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">æŠ€èƒ½ç‰¹é•¿</label>
                        <input type="text" class="form-input" id="editSkills" placeholder="è¯·è¾“å…¥æŠ€èƒ½ç‰¹é•¿ï¼Œå¤šä¸ªæŠ€èƒ½ç”¨é€—å·åˆ†éš”ï¼ˆå¦‚ï¼šPythonç¼–ç¨‹,å°å­¦æ•°å­¦è¾…å¯¼,çŸ­è§†é¢‘å‰ªè¾‘ï¼‰">
                        <div class="form-tip">ç¤ºä¾‹ï¼šPythonç¼–ç¨‹,å°å­¦æ•°å­¦è¾…å¯¼,çŸ­è§†é¢‘å‰ªè¾‘</div>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">å·¥ä½œ/å®ä¹ ç»å†</label>
                        <textarea class="intro-textarea" id="editExperience" placeholder="è¯·è¯¦ç»†æè¿°ä½ çš„å·¥ä½œ/å®ä¹ ç»å†ï¼ŒåŒ…æ‹¬æ—¶é—´ã€å²—ä½ã€ä¸»è¦èŒè´£å’Œæˆæœ"></textarea>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">è‡ªæˆ‘è¯„ä»·</label>
                        <textarea class="intro-textarea" id="editSelfEval" placeholder="è¯·ç®€è¦æè¿°ä½ çš„ä¸ªäººä¼˜åŠ¿ã€æ±‚èŒæ„å‘ç­‰"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-default" onclick="closeModal('editModal')">å–æ¶ˆ</button>
                <button class="modal-btn btn-primary" onclick="saveEditResume()">ä¿å­˜ä¿®æ”¹</button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢ç®€å†å¼¹çª— -->
    <div class="modal-mask" id="addModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title">æ·»åŠ æ–°ç®€å†</h2>
                <button class="modal-close" onclick="closeModal('addModal')">Ã—</button>
            </div>
            <div class="modal-body">
                <form id="addResumeForm">
                    <div class="resume-form-item">
                        <label class="form-label">ç®€å†åç§° <span style="color: #f44336;">*</span></label>
                        <input type="text" class="form-input" id="addResumeName" placeholder="è¯·è¾“å…¥ç®€å†åç§°ï¼ˆå¦‚ï¼šé€šç”¨ç®€å†ã€å®¶æ•™ç®€å†ï¼‰" required>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">ç®€å†ç±»å‹ <span style="color: #f44336;">*</span></label>
                        <select class="resume-type-select" id="addResumeType" required>
                            <option value="">è¯·é€‰æ‹©ç®€å†ç±»å‹</option>
                            <option value="é€šç”¨ç®€å†">é€šç”¨ç®€å†</option>
                            <option value="å®¶æ•™ä¸“é¡¹ç®€å†">å®¶æ•™ä¸“é¡¹ç®€å†</option>
                            <option value="ç¼–ç¨‹ä¸“é¡¹ç®€å†">ç¼–ç¨‹ä¸“é¡¹ç®€å†</option>
                            <option value="å‰ªè¾‘ä¸“é¡¹ç®€å†">å‰ªè¾‘ä¸“é¡¹ç®€å†</option>
                            <option value="å…¶ä»–ä¸“é¡¹ç®€å†">å…¶ä»–ä¸“é¡¹ç®€å†</option>
                        </select>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">æŠ€èƒ½ç‰¹é•¿</label>
                        <input type="text" class="form-input" id="addSkills" placeholder="è¯·è¾“å…¥æŠ€èƒ½ç‰¹é•¿ï¼Œå¤šä¸ªæŠ€èƒ½ç”¨é€—å·åˆ†éš”ï¼ˆå¦‚ï¼šPythonç¼–ç¨‹,å°å­¦æ•°å­¦è¾…å¯¼,çŸ­è§†é¢‘å‰ªè¾‘ï¼‰">
                        <div class="form-tip">ç¤ºä¾‹ï¼šPythonç¼–ç¨‹,å°å­¦æ•°å­¦è¾…å¯¼,çŸ­è§†é¢‘å‰ªè¾‘</div>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">å·¥ä½œ/å®ä¹ ç»å†</label>
                        <textarea class="intro-textarea" id="addExperience" placeholder="è¯·è¯¦ç»†æè¿°ä½ çš„å·¥ä½œ/å®ä¹ ç»å†ï¼ŒåŒ…æ‹¬æ—¶é—´ã€å²—ä½ã€ä¸»è¦èŒè´£å’Œæˆæœ"></textarea>
                    </div>
                    <div class="resume-form-item">
                        <label class="form-label">è‡ªæˆ‘è¯„ä»·</label>
                        <textarea class="intro-textarea" id="addSelfEval" placeholder="è¯·ç®€è¦æè¿°ä½ çš„ä¸ªäººä¼˜åŠ¿ã€æ±‚èŒæ„å‘ç­‰"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="modal-btn btn-default" onclick="closeModal('addModal')">å–æ¶ˆ</button>
                <button class="modal-btn btn-primary" onclick="saveAddResume()">åˆ›å»ºç®€å†</button>
            </div>
        </div>
    </div>
<script src="theme-control.js"></script>
    <script>
        // ç®€å†æ•°æ®ï¼ˆæ¨¡æ‹Ÿæœ¬åœ°å­˜å‚¨ï¼‰
        let resumeData = [
            {
                id: 1,
                name: "é€šç”¨ç®€å†",
                type: "é€šç”¨ç®€å†",
                updateTime: "2025-04-20",
                complete: "åŸºæœ¬ä¿¡æ¯ã€æŠ€èƒ½ç‰¹é•¿ã€å·¥ä½œç»å†",
                skills: "Pythonç¼–ç¨‹,å°å­¦æ•°å­¦è¾…å¯¼,çŸ­è§†é¢‘å‰ªè¾‘,æ–‡æ¡ˆå†™ä½œ",
                experience: "1. 2024.09-2025.01 å®¶æ•™å…¼èŒï¼ˆå°å­¦æ•°å­¦/è‹±è¯­ï¼‰ï¼šè´Ÿè´£3-6å¹´çº§å­¦ç”Ÿè¯¾åè¾…å¯¼ï¼Œå¹³å‡æåˆ†15åˆ†ï¼›\n2. 2024.07-2024.08 çŸ­è§†é¢‘å‰ªè¾‘å…¼èŒï¼šå®Œæˆ15æ¡çŸ­è§†é¢‘å‰ªè¾‘ï¼Œæ’­æ”¾é‡å‡è¶…1ä¸‡ï¼›\n3. 2024.03-2024.06 Pythonç¼–ç¨‹å…¼èŒï¼šå®Œæˆ2ä¸ªå°å‹çˆ¬è™«é¡¹ç›®ï¼Œæ•°æ®é‡‡é›†æ•ˆç‡æå‡50%ã€‚",
                selfEval: "æœ¬äººæ˜¯åŒ—äº¬ç§‘æŠ€å¤§å­¦è®¡ç®—æœºä¸“ä¸šå¤§ä¸‰å­¦ç”Ÿï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼Œæœ‰ä¸°å¯Œçš„å…¼èŒç»éªŒã€‚åšäº‹è®¤çœŸè´Ÿè´£ï¼Œæ—¶é—´çµæ´»ï¼Œæ“…é•¿æ²Ÿé€šï¼Œèƒ½å¤Ÿå¿«é€Ÿé€‚åº”ä¸åŒå·¥ä½œéœ€æ±‚ï¼ŒæœŸå¾…æ‰¾åˆ°åˆé€‚çš„å…¼èŒæœºä¼šã€‚",
                isDefault: true // æ ‡è®°ä¸ºé»˜è®¤ç®€å†
            },
            {
                id: 2,
                name: "å®¶æ•™ä¸“é¡¹ç®€å†",
                type: "å®¶æ•™ä¸“é¡¹ç®€å†",
                updateTime: "2025-04-25",
                complete: "æ•™è‚²èƒŒæ™¯ã€å®¶æ•™ç»éªŒã€æ“…é•¿ç§‘ç›®",
                skills: "å°å­¦æ•°å­¦è¾…å¯¼,å°å­¦è‹±è¯­è¾…å¯¼,åˆä¸­æ•°å­¦è¾…å¯¼,ä½œä¸šè¾…å¯¼",
                experience: "1. 2024.09-è‡³ä»Š å°å­¦æ•°å­¦/è‹±è¯­å®¶æ•™ï¼šè¾…å¯¼2åå°å­¦4å¹´çº§å­¦ç”Ÿï¼Œæ•°å­¦å¹³å‡åˆ†ä»75æå‡è‡³90ï¼Œè‹±è¯­ä»80æå‡è‡³92ï¼›\n2. 2024.03-2024.08 åˆä¸­æ•°å­¦å®¶æ•™ï¼šè¾…å¯¼1ååˆäºŒå­¦ç”Ÿï¼ŒæœŸæœ«æˆç»©æå‡20åˆ†ï¼›\n3. 2023.09-2024.02 ä½œä¸šè¾…å¯¼è€å¸ˆï¼šè´Ÿè´£å°å­¦ç”Ÿå…¨ç§‘ä½œä¸šè¾…å¯¼ï¼Œç´¯è®¡æœåŠ¡30+å­¦ç”Ÿã€‚",
                selfEval: "æ“…é•¿å°å­¦/åˆä¸­æ•°å­¦ã€è‹±è¯­è¾…å¯¼ï¼Œç†Ÿæ‚‰å„ç‰ˆæœ¬æ•™æï¼Œèƒ½å¤Ÿåˆ¶å®šä¸ªæ€§åŒ–è¾…å¯¼æ–¹æ¡ˆã€‚æœ‰è€å¿ƒã€æœ‰çˆ±å¿ƒï¼Œå–„äºå¼•å¯¼å­¦ç”Ÿæ€è€ƒï¼Œå¸®åŠ©å­¦ç”Ÿå»ºç«‹å­¦ä¹ ä¿¡å¿ƒï¼Œæå‡å­¦ä¹ æˆç»©ã€‚",
                isDefault: false
            }
        ];

        // é€šç”¨å¼¹çª—æ§åˆ¶
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // é¢„è§ˆç®€å†
        function previewResume(resumeId) {
            const resume = resumeData.find(item => item.id === resumeId);
            if (!resume) return;

            // è®¾ç½®é¢„è§ˆæ ‡é¢˜
            document.getElementById('previewTitle').textContent = `${resume.name} - ç®€å†é¢„è§ˆ`;
            
            // ç”ŸæˆæŠ€èƒ½æ ‡ç­¾
            const skillTags = resume.skills.split(',').map(skill => 
                `<span class="skill-tag">${skill.trim()}</span>`
            ).join('');

            // ç”Ÿæˆé¢„è§ˆå†…å®¹
            const previewHtml = `
                <div class="resume-preview">
                    <div class="resume-section">
                        <h4>åŸºæœ¬ä¿¡æ¯</h4>
                        <p><strong>ç®€å†åç§°ï¼š</strong>${resume.name}</p>
                        <p><strong>ç®€å†ç±»å‹ï¼š</strong>${resume.type}</p>
                        <p><strong>æ›´æ–°æ—¶é—´ï¼š</strong>${resume.updateTime}</p>
                        ${resume.isDefault ? '<p><strong>é»˜è®¤ç®€å†ï¼š</strong>æ˜¯</p>' : ''}
                    </div>
                    <div class="resume-section">
                        <h4>æŠ€èƒ½ç‰¹é•¿</h4>
                        <div>${skillTags}</div>
                    </div>
                    <div class="resume-section">
                        <h4>å·¥ä½œ/å®ä¹ ç»å†</h4>
                        <pre style="white-space: pre-wrap; font-family: inherit; border: none; background: none; padding: 0; margin: 0;">${resume.experience}</pre>
                    </div>
                    <div class="resume-section">
                        <h4>è‡ªæˆ‘è¯„ä»·</h4>
                        <p>${resume.selfEval}</p>
                    </div>
                </div>
            `;

            document.getElementById('previewContent').innerHTML = previewHtml;
            openModal('previewModal');
        }

        // æ‰“å¼€ç¼–è¾‘ç®€å†å¼¹çª—
        function editResume(resumeId) {
            const resume = resumeData.find(item => item.id === resumeId);
            if (!resume) return;

            // å¡«å……è¡¨å•æ•°æ®
            document.getElementById('editResumeId').value = resume.id;
            document.getElementById('editResumeName').value = resume.name;
            document.getElementById('editResumeType').value = resume.type;
            document.getElementById('editSkills').value = resume.skills;
            document.getElementById('editExperience').value = resume.experience;
            document.getElementById('editSelfEval').value = resume.selfEval;

            // è®¾ç½®æ ‡é¢˜
            document.getElementById('editTitle').textContent = `ç¼–è¾‘${resume.name}`;
            
            openModal('editModal');
        }

        // ä¿å­˜ç¼–è¾‘çš„ç®€å†
        function saveEditResume() {
            const resumeId = parseInt(document.getElementById('editResumeId').value);
            const resumeName = document.getElementById('editResumeName').value.trim();
            const resumeType = document.getElementById('editResumeType').value;
            const skills = document.getElementById('editSkills').value.trim();
            const experience = document.getElementById('editExperience').value.trim();
            const selfEval = document.getElementById('editSelfEval').value.trim();

            // è¡¨å•éªŒè¯
            if (!resumeName) {
                alert('ç®€å†åç§°ä¸èƒ½ä¸ºç©ºï¼');
                return;
            }

            // æ›´æ–°ç®€å†æ•°æ®
            const index = resumeData.findIndex(item => item.id === resumeId);
            if (index !== -1) {
                resumeData[index] = {
                    ...resumeData[index],
                    name: resumeName,
                    type: resumeType,
                    skills: skills || resumeData[index].skills,
                    experience: experience || resumeData[index].experience,
                    selfEval: selfEval || resumeData[index].selfEval,
                    updateTime: new Date().toISOString().split('T')[0] // æ›´æ–°ä¸ºå½“å‰æ—¥æœŸ
                };

                // æ›´æ–°é¡µé¢æ˜¾ç¤º
                updateResumeList();
                
                alert('ç®€å†ä¿®æ”¹æˆåŠŸï¼');
                closeModal('editModal');
            }
        }

        // æ‰“å¼€æ–°å¢ç®€å†å¼¹çª—
        function openAddResumeModal() {
            // é‡ç½®è¡¨å•
            document.getElementById('addResumeForm').reset();
            openModal('addModal');
        }

        // ä¿å­˜æ–°å¢ç®€å†
        function saveAddResume() {
            const resumeName = document.getElementById('addResumeName').value.trim();
            const resumeType = document.getElementById('addResumeType').value;
            const skills = document.getElementById('addSkills').value.trim();
            const experience = document.getElementById('addExperience').value.trim();
            const selfEval = document.getElementById('addSelfEval').value.trim();

            // è¡¨å•éªŒè¯
            if (!resumeName) {
                alert('ç®€å†åç§°ä¸èƒ½ä¸ºç©ºï¼');
                return;
            }
            if (!resumeType) {
                alert('è¯·é€‰æ‹©ç®€å†ç±»å‹ï¼');
                return;
            }

            // ç”Ÿæˆæ–°ç®€å†ID
            const newId = resumeData.length > 0 ? Math.max(...resumeData.map(item => item.id)) + 1 : 1;
            
            // æ·»åŠ æ–°ç®€å†
            const newResume = {
                id: newId,
                name: resumeName,
                type: resumeType,
                updateTime: new Date().toISOString().split('T')[0],
                complete: skills ? "æŠ€èƒ½ç‰¹é•¿" : "å¾…å®Œå–„",
                skills: skills,
                experience: experience,
                selfEval: selfEval,
                isDefault: false // æ–°ç®€å†é»˜è®¤ä¸æ˜¯é»˜è®¤ç®€å†
            };

            resumeData.push(newResume);
            
            // æ›´æ–°é¡µé¢æ˜¾ç¤º
            updateResumeList();
            
            alert('æ–°ç®€å†åˆ›å»ºæˆåŠŸï¼');
            closeModal('addModal');
        }

        // åˆ é™¤ç®€å†åŠŸèƒ½
        function deleteResume(resumeId) {
            // æŸ¥æ‰¾ç®€å†
            const resume = resumeData.find(item => item.id === resumeId);
            if (!resume) return;

            // ä¿æŠ¤é»˜è®¤ç®€å†ä¸è¢«åˆ é™¤
            if (resume.isDefault) {
                alert('é»˜è®¤ç®€å†ä¸èƒ½åˆ é™¤ï¼ä½ å¯ä»¥ç¼–è¾‘è¯¥ç®€å†ï¼Œæˆ–åˆ›å»ºæ–°ç®€å†åè®¾ç½®ä¸ºé»˜è®¤ã€‚');
                return;
            }

            // äºŒæ¬¡ç¡®è®¤åˆ é™¤
            if (!confirm(`ç¡®å®šè¦åˆ é™¤ã€${resume.name}ã€‘å—ï¼Ÿåˆ é™¤åæ•°æ®å°†æ— æ³•æ¢å¤ï¼`)) {
                return;
            }

            // ä»æ•°æ®ä¸­åˆ é™¤
            resumeData = resumeData.filter(item => item.id !== resumeId);
            
            // æ›´æ–°é¡µé¢æ˜¾ç¤º
            updateResumeList();
            
            alert(`ã€${resume.name}ã€‘å·²æˆåŠŸåˆ é™¤ï¼`);
        }

        // æ›´æ–°ç®€å†åˆ—è¡¨æ˜¾ç¤º
        function updateResumeList() {
            const resumeList = document.getElementById('resumeList');
            const emptyTip = document.getElementById('emptyResumeTip');
            
            // æ¸…ç©ºåŸæœ‰åˆ—è¡¨
            resumeList.innerHTML = '';

            // åˆ¤æ–­æ˜¯å¦æœ‰ç®€å†æ•°æ®
            if (resumeData.length === 0) {
                // æ˜¾ç¤ºç©ºåˆ—è¡¨æç¤º
                emptyTip.style.display = 'block';
                return;
            } else {
                // éšè—ç©ºåˆ—è¡¨æç¤º
                emptyTip.style.display = 'none';
            }

            // é‡æ–°ç”Ÿæˆç®€å†é¡¹
            resumeData.forEach(resume => {
                const isDefault = resume.isDefault ? '<span class="resume-default">é»˜è®¤ç®€å†</span>' : '';
                // åˆ¤æ–­æ˜¯å¦ç¦ç”¨åˆ é™¤æŒ‰é’®ï¼ˆé»˜è®¤ç®€å†ç¦ç”¨ï¼‰
                const deleteBtnDisabled = resume.isDefault ? 'disabled' : '';
                const deleteBtnTip = resume.isDefault ? 'title="é»˜è®¤ç®€å†ä¸èƒ½åˆ é™¤"' : '';
                
                const resumeItem = document.createElement('div');
                resumeItem.className = 'resume-item';
                resumeItem.setAttribute('data-resume-id', resume.id);
                resumeItem.setAttribute('data-resume-type', resume.type);
                resumeItem.innerHTML = `
                    <div class="resume-info">
                        <h4>${resume.name} ${isDefault}</h4>
                        <p>æ›´æ–°æ—¶é—´ï¼š${resume.updateTime} | å·²å®Œå–„ï¼š${resume.complete}</p>
                    </div>
                    <div class="resume-actions">
                        <button class="resume-btn btn-default" onclick="previewResume(${resume.id})">é¢„è§ˆ</button>
                        <button class="resume-btn btn-primary" onclick="editResume(${resume.id})">ç¼–è¾‘</button>
                        <button class="delete-btn" ${deleteBtnDisabled} ${deleteBtnTip} onclick="deleteResume(${resume.id})">åˆ é™¤</button>
                    </div>
                `;
                resumeList.appendChild(resumeItem);
            });
            
            // æ·»åŠ æ–°å¢æŒ‰é’®
            const addBtn = document.createElement('button');
            addBtn.className = 'add-resume-btn';
            addBtn.onclick = openAddResumeModal;
            addBtn.textContent = '+ æ·»åŠ æ–°ç®€å†';
            resumeList.appendChild(addBtn);
        }

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                alert('é€€å‡ºæˆåŠŸï¼');
                window.location.href = 'personal.html';
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.onload = function() {
            updateResumeList();
        };
    </script>
</body>
</html>