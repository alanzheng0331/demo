<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä¼ä¸šå…¼èŒå®¡æ ¸ - å…¼èŒç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="header-logo">æ˜“å…¼èŒâ€”ç®¡ç†å‘˜åå°</div>
        <div class="header-user">
            <span>æ¬¢è¿, ç®¡ç†å‘˜</span>
            <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
        </div>
    </header>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li class="menu-title">å®¡æ ¸ç®¡ç†</li>
                <li><a href="companyReview.html">
                    <span class="menu-icon">ğŸ¢</span><span>ä¼ä¸šæ³¨å†Œå®¡æŸ¥</span>
                </a></li>
                <li><a href="jobReview.html" class="active">
                    <span class="menu-icon">ğŸ’¼</span><span>ä¼ä¸šå…¼èŒå®¡æ ¸</span>
                </a></li>
                <li class="menu-title">è´¦å·ç®¡ç†</li>
                <li><a href="userManagement.html">
                    <span class="menu-icon">ğŸ‘¤</span><span>ç”¨æˆ·è´¦å·ç®¡ç†</span>
                </a></li>
                <li><a href="companyManagement.html">
                    <span class="menu-icon">ğŸ­</span><span>ä¼ä¸šè´¦å·ç®¡ç†</span>
                </a></li>
            </ul>
        </aside>

        <!-- å†…å®¹åŒº -->
        <div class="content">
            <div class="msg-box success-msg" id="successMsg">æ“ä½œæˆåŠŸï¼</div>
            <div class="msg-box error-msg" id="errorMsg">æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•ï¼</div>

            <div class="content-header">
                <h1 class="page-title">ä¼ä¸šå…¼èŒå®¡æ ¸</h1>
                <div>
                    <select class="search-input" id="statusSelect" style="width: auto; margin-right: 10px;">
                        <option value="">å…¨éƒ¨çŠ¶æ€</option>
                        <option value="pending">å¾…å®¡æ ¸</option>
                        <option value="approved">å·²é€šè¿‡</option>
                        <option value="rejected">å·²æ‹’ç»</option>
                    </select>
                    <button class="search-btn" onclick="searchJob()">ç­›é€‰</button>
                </div>
            </div>

            <div class="card">
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchKey" placeholder="æœç´¢å…¼èŒæ ‡é¢˜/ä¼ä¸šåç§°/å·¥ä½œåœ°ç‚¹">
                    <button class="search-btn" onclick="searchJob()">æœç´¢</button>
                </div>

                <table class="table-common">
                    <thead>
                        <tr>
                            <th>å…¼èŒID</th>
                            <th>å…¼èŒæ ‡é¢˜</th>
                            <th>å‘å¸ƒä¼ä¸š</th>
                            <th>å·¥ä½œåœ°ç‚¹</th>
                            <th>è–ªèµ„èŒƒå›´</th>
                            <th>å‘å¸ƒæ—¶é—´</th>
                            <th>å®¡æ ¸çŠ¶æ€</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="jobTableBody">
                        <tr>
                            <td>501</td>
                            <td>æ ¡å›­å…¼èŒæ¨å¹¿å‘˜</td>
                            <td>åŒ—äº¬ç§‘æŠ€æœ‰é™å…¬å¸</td>
                            <td>åŒ—äº¬å¸‚æµ·æ·€åŒº</td>
                            <td>150-200å…ƒ/å¤©</td>
                            <td>2025-05-25 10:30</td>
                            <td><span class="status-tag status-pending">å¾…å®¡æ ¸</span></td>
                            <td class="btn-group">
                                <button class="btn-small btn-view" onclick="viewJob(501)">æŸ¥çœ‹</button>
                                <button class="btn-small btn-approve" onclick="reviewJob(501, 'approved')">é€šè¿‡</button>
                                <button class="btn-small btn-reject" onclick="reviewJob(501, 'rejected')">æ‹’ç»</button>
                            </td>
                        </tr>
                        <tr>
                            <td>502</td>
                            <td>çŸ­è§†é¢‘å‰ªè¾‘å®ä¹ ç”Ÿ</td>
                            <td>ä¸Šæµ·æ–‡åŒ–ä¼ åª’å…¬å¸</td>
                            <td>ä¸Šæµ·å¸‚å¾æ±‡åŒº</td>
                            <td>120-180å…ƒ/å¤©</td>
                            <td>2025-05-24 14:20</td>
                            <td><span class="status-tag status-pending">å¾…å®¡æ ¸</span></td>
                            <td class="btn-group">
                                <button class="btn-small btn-view" onclick="viewJob(502)">æŸ¥çœ‹</button>
                                <button class="btn-small btn-approve" onclick="reviewJob(502, 'approved')">é€šè¿‡</button>
                                <button class="btn-small btn-reject" onclick="reviewJob(502, 'rejected')">æ‹’ç»</button>
                            </td>
                        </tr>
                        <tr>
                            <td>503</td>
                            <td>ç”µå•†å®¢æœå…¼èŒ</td>
                            <td>å¹¿å·è´¸æ˜“æœ‰é™å…¬å¸</td>
                            <td>å¹¿å·å¸‚å¤©æ²³åŒº</td>
                            <td>100-150å…ƒ/å¤©</td>
                            <td>2025-05-23 09:15</td>
                            <td><span class="status-tag status-rejected">å·²æ‹’ç»</span></td>
                            <td class="btn-group">
                                <button class="btn-small btn-view" onclick="viewJob(503)">æŸ¥çœ‹</button>
                                <button class="btn-small btn-approve" onclick="reviewJob(503, 'approved')">é€šè¿‡</button>
                                <button class="btn-small btn-reject" disabled style="background: #ccc; cursor: not-allowed;">æ‹’ç»</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="pagination">
                    <a href="javascript:void(0)" class="page-btn" onclick="changePage('prev')">Â«</a>
                    <a href="javascript:void(0)" class="page-btn active" onclick="changePage(1)">1</a>
                    <a href="javascript:void(0)" class="page-btn" onclick="changePage(2)">2</a>
                    <a href="javascript:void(0)" class="page-btn" onclick="changePage('next')">Â»</a>
                </div>
            </div>
        </div>
    </div>

    <!-- å…¼èŒè¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">å…¼èŒä¿¡æ¯è¯¦æƒ…</h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <div id="jobDetailContent"></div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="close-btn" style="background: #f1f5f9; padding: 6px 16px; border-radius: 6px; font-size: 14px; color: #475569;" onclick="closeModal()">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- å®¡æ ¸å¤„ç†å¼¹çª— -->
    <div class="modal" id="reviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="reviewTitle">å®¡æ ¸é€šè¿‡</h2>
                <button class="close-btn" onclick="closeModal()">Ã—</button>
            </div>
            <form id="reviewForm" onsubmit="return submitReview()">
                <input type="hidden" id="reviewId" value="">
                <input type="hidden" id="reviewAction" value="">
                <div class="form-group">
                    <label class="form-label" for="reviewRemark">å®¡æ ¸å¤‡æ³¨</label>
                    <textarea class="form-control" id="reviewRemark" rows="4" placeholder="è¯·è¾“å…¥å®¡æ ¸å¤‡æ³¨ï¼ˆé€‰å¡«ï¼‰"></textarea>
                </div>
                <button type="submit" class="submit-btn" id="reviewSubmitBtn">ç¡®è®¤é€šè¿‡</button>
            </form>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 2;

        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                window.location.href = 'login.html';
            }
        }

        // æŸ¥çœ‹å…¼èŒè¯¦æƒ…
        function viewJob(id) {
            hideMessages();
            const jobData = {
                501: {
                    title: 'æ ¡å›­å…¼èŒæ¨å¹¿å‘˜',
                    enterprise: 'åŒ—äº¬ç§‘æŠ€æœ‰é™å…¬å¸',
                    location: 'åŒ—äº¬å¸‚æµ·æ·€åŒºå„å¤§é«˜æ ¡',
                    salary: '150-200å…ƒ/å¤©',
                    time: '2025-05-25 10:30',
                    workTime: 'å‘¨ä¸€è‡³å‘¨äº” 14:00-18:00',
                    requirement: '1. åœ¨æ ¡å¤§å­¦ç”Ÿä¼˜å…ˆï¼›2. æ€§æ ¼å¼€æœ—ï¼Œå–„äºæ²Ÿé€šï¼›3. æœ‰æ¨å¹¿ç»éªŒè€…ä¼˜å…ˆ',
                    content: 'è´Ÿè´£å…¬å¸æ–°äº§å“åœ¨æ ¡å›­å†…çš„æ¨å¹¿å®£ä¼ ï¼Œå‘æ”¾ä¼ å•ã€å¼•å¯¼å­¦ç”Ÿæ³¨å†ŒAPPï¼Œå®ŒæˆæŒ‡å®šæ¨å¹¿ä»»åŠ¡å³å¯è·å¾—æ—¥è–ªï¼Œè¡¨ç°ä¼˜å¼‚è€…æœ‰é¢å¤–å¥–é‡‘ã€‚',
                    contact: 'å¼ ç»ç† 138****1234',
                    remark: ''
                },
                502: {
                    title: 'çŸ­è§†é¢‘å‰ªè¾‘å®ä¹ ç”Ÿ',
                    enterprise: 'ä¸Šæµ·æ–‡åŒ–ä¼ åª’å…¬å¸',
                    location: 'ä¸Šæµ·å¸‚å¾æ±‡åŒºåˆ›æ„å›­ï¼ˆå¯è¿œç¨‹ï¼‰',
                    salary: '120-180å…ƒ/å¤©',
                    time: '2025-05-24 14:20',
                    workTime: 'å¼¹æ€§å·¥ä½œåˆ¶ï¼Œæ¯å‘¨è‡³å°‘3å¤©',
                    requirement: '1. ç†Ÿç»ƒä½¿ç”¨å‰ªæ˜ ã€PRç­‰å‰ªè¾‘è½¯ä»¶ï¼›2. æœ‰çŸ­è§†é¢‘å‰ªè¾‘ç»éªŒï¼›3. ä¼šåŸºç¡€è°ƒè‰²å’Œå­—å¹•åˆ¶ä½œ',
                    content: 'è´Ÿè´£å…¬å¸çŸ­è§†é¢‘è´¦å·çš„å†…å®¹å‰ªè¾‘ï¼Œæ ¹æ®è„šæœ¬å®Œæˆç´ æå‰ªè¾‘ã€é…ä¹ã€åŠ å­—å¹•ç­‰å·¥ä½œï¼Œè¦æ±‚å‰ªè¾‘é£æ ¼ç¬¦åˆè´¦å·å®šä½ï¼Œæ•ˆç‡é«˜ã€è´¨é‡ä¼˜è€…ä¼˜å…ˆå½•ç”¨ã€‚',
                    contact: 'ææ€»ç›‘ 139****5678',
                    remark: ''
                },
                503: {
                    title: 'ç”µå•†å®¢æœå…¼èŒ',
                    enterprise: 'å¹¿å·è´¸æ˜“æœ‰é™å…¬å¸',
                    location: 'å¹¿å·å¸‚å¤©æ²³åŒºç”µå•†äº§ä¸šå›­',
                    salary: '100-150å…ƒ/å¤©',
                    time: '2025-05-23 09:15',
                    workTime: 'å‘¨æœ« 9:00-18:00',
                    requirement: '1. æ‰“å­—é€Ÿåº¦å¿«ï¼Œæ²Ÿé€šèƒ½åŠ›å¼ºï¼›2. æœ‰ç”µå•†å®¢æœç»éªŒä¼˜å…ˆï¼›3. ç†Ÿæ‚‰æ·˜å®ã€æ‹¼å¤šå¤šå¹³å°è§„åˆ™',
                    content: 'è´Ÿè´£è§£ç­”å®¢æˆ·å’¨è¯¢ã€å¤„ç†è®¢å•å”®åã€å¼•å¯¼å®¢æˆ·ä¸‹å•ç­‰å·¥ä½œï¼Œæ— é”€å”®æ€§è´¨ï¼Œçº¯å®¢æœå²—ä½ã€‚',
                    contact: 'ç‹æ€» 137****9012',
                    remark: 'è–ªèµ„ä½äºå¸‚åœºå¹³å‡æ°´å¹³ï¼Œä¸”æœªæ˜ç¡®ç¤¾ä¿ç­‰ä¿éšœ'
                }
            };

            const data = jobData[id] || {};
            let remarkHtml = data.remark ? `<p><strong>æ‹’ç»åŸå› ï¼š</strong>${data.remark}</p>` : '';
            
            const html = `
                <div style="line-height: 1.8;">
                    <p><strong>å…¼èŒæ ‡é¢˜ï¼š</strong>${data.title || 'æœªçŸ¥'}</p>
                    <p><strong>å‘å¸ƒä¼ä¸šï¼š</strong>${data.enterprise || 'æœªçŸ¥'}</p>
                    <p><strong>å·¥ä½œåœ°ç‚¹ï¼š</strong>${data.location || 'æœªçŸ¥'}</p>
                    <p><strong>è–ªèµ„èŒƒå›´ï¼š</strong>${data.salary || 'æœªçŸ¥'}</p>
                    <p><strong>å‘å¸ƒæ—¶é—´ï¼š</strong>${data.time || 'æœªçŸ¥'}</p>
                    <p><strong>å·¥ä½œæ—¶é—´ï¼š</strong>${data.workTime || 'æœªçŸ¥'}</p>
                    <p><strong>ä»»èŒè¦æ±‚ï¼š</strong>${data.requirement || 'æ— '}</p>
                    <p><strong>å·¥ä½œå†…å®¹ï¼š</strong>${data.content || 'æ— '}</p>
                    <p><strong>è”ç³»æ–¹å¼ï¼š</strong>${data.contact || 'æœªçŸ¥'}</p>
                    ${remarkHtml}
                </div>
            `;
            document.getElementById('jobDetailContent').innerHTML = html;
            document.getElementById('detailModal').style.display = 'flex';
        }

        // æ‰“å¼€å®¡æ ¸å¼¹çª—
        function reviewJob(id, action) {
            hideMessages();
            document.getElementById('reviewId').value = id;
            document.getElementById('reviewAction').value = action;
            const actionText = action === 'approved' ? 'é€šè¿‡' : 'æ‹’ç»';
            document.getElementById('reviewTitle').textContent = `å®¡æ ¸${actionText}`;
            document.getElementById('reviewSubmitBtn').textContent = `ç¡®è®¤${actionText}`;
            document.getElementById('reviewRemark').value = '';
            document.getElementById('reviewModal').style.display = 'flex';
        }

        // æäº¤å®¡æ ¸
        function submitReview() {
            const id = document.getElementById('reviewId').value;
            const action = document.getElementById('reviewAction').value;
            const remark = document.getElementById('reviewRemark').value.trim();
            
            const rows = document.querySelectorAll('#jobTableBody tr');
            let updated = false;
            rows.forEach(row => {
                if (row.cells[0].textContent === id) {
                    const statusTag = row.querySelector('.status-tag');
                    const btnGroup = row.querySelector('.btn-group');
                    if (action === 'approved') {
                        statusTag.className = 'status-tag status-approved';
                        statusTag.textContent = 'å·²é€šè¿‡';
                        btnGroup.querySelector('.btn-approve').disabled = true;
                        btnGroup.querySelector('.btn-approve').style.background = '#ccc';
                    } else {
                        statusTag.className = 'status-tag status-rejected';
                        statusTag.textContent = 'å·²æ‹’ç»';
                        btnGroup.querySelector('.btn-reject').disabled = true;
                        btnGroup.querySelector('.btn-reject').style.background = '#ccc';
                    }
                    updated = true;
                }
            });

            closeModal();
            if (updated) {
                showSuccessMessage(`å…¼èŒä¿¡æ¯å®¡æ ¸${action === 'approved' ? 'é€šè¿‡' : 'æ‹’ç»'}æˆåŠŸï¼`);
            } else {
                showErrorMessage('å®¡æ ¸æ“ä½œå¤±è´¥ï¼');
            }
            return false;
        }

        // æœç´¢å…¼èŒ
        function searchJob() {
            hideMessages();
            const key = document.getElementById('searchKey').value.trim().toLowerCase();
            const status = document.getElementById('statusSelect').value;
            const rows = document.querySelectorAll('#jobTableBody tr');
            let hasResult = false;

            rows.forEach(row => {
                const title = row.cells[1].textContent.toLowerCase();
                const enterprise = row.cells[2].textContent.toLowerCase();
                const location = row.cells[3].textContent.toLowerCase();
                const rowStatus = row.querySelector('.status-tag').classList.contains('status-pending') ? 'pending' : 
                                  row.querySelector('.status-tag').classList.contains('status-approved') ? 'approved' : 'rejected';
                
                const matchKey = !key || title.includes(key) || enterprise.includes(key) || location.includes(key);
                const matchStatus = !status || rowStatus === status;

                if (matchKey && matchStatus) {
                    row.style.display = '';
                    hasResult = true;
                } else {
                    row.style.display = 'none';
                }
            });

            if (!hasResult) {
                const tbody = document.getElementById('jobTableBody');
                if (!tbody.querySelector('#emptyRow')) {
                    tbody.innerHTML += '<tr id="emptyRow"><td colspan="8" style="text-align: center; color: #999;">æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„å…¼èŒ</td></tr>';
                }
            } else {
                const emptyRow = document.getElementById('emptyRow');
                emptyRow && emptyRow.remove();
            }
        }

        // åˆ†é¡µåˆ‡æ¢
        function changePage(page) {
            if (page === 'prev') currentPage = Math.max(1, currentPage - 1);
            else if (page === 'next') currentPage = Math.min(totalPages, currentPage + 1);
            else currentPage = parseInt(page);
            
            document.querySelectorAll('.page-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === currentPage.toString()) btn.classList.add('active');
            });
            showSuccessMessage(`å·²åˆ‡æ¢åˆ°ç¬¬${currentPage}é¡µ`);
        }

        // å…³é—­å¼¹çª—
        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
            document.getElementById('reviewModal').style.display = 'none';
        }

        // æç¤ºä¿¡æ¯
        function showSuccessMessage(msg) {
            const success = document.getElementById('successMsg');
            const error = document.getElementById('errorMsg');
            error.style.display = 'none';
            success.textContent = msg;
            success.style.display = 'block';
            setTimeout(() => success.style.display = 'none', 3000);
        }

        function showErrorMessage(msg) {
            const success = document.getElementById('successMsg');
            const error = document.getElementById('errorMsg');
            success.style.display = 'none';
            error.textContent = msg;
            error.style.display = 'block';
            setTimeout(() => error.style.display = 'none', 3000);
        }

        function hideMessages() {
            document.getElementById('successMsg').style.display = 'none';
            document.getElementById('errorMsg').style.display = 'none';
        }
    </script>
</body>
</html>